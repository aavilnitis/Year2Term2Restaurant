{% extends "base.html" %} {% block title %}Display all Orders{% endblock %} 

{% block content %}
<link rel="stylesheet" href="./static/style/waiter-view-order.css">
<div class = "view-orders">
<div class="orders">
<table class="table table-striped">
  <thead>
    <tr>
      <th>Order ID</th>
      <th>Table number</th>
      <th>Menu Items</th>
      <th>Order Status</th>
      <th>Delivery status</th>
      <th>Time Placed</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in orders %}
      <tr>
        <td>{{ item.id }}</td>
        <td>
          {% for user in users %}
            {% if user.id == item.user_id %}
              {{ user.table_number }}
            {% endif %}
          {% endfor %}
        </td>        
        <td>
          <ol>
            {% for order_menu_item in item.order_menu_items %}
              {% for menu_item in menu_items %}
                {% if order_menu_item.menu_item_id == menu_item.id %}
                  <li>
                    {{menu_item.name}} - Quantity: {{order_menu_item.quantity}}
                    <br> Item Price: Â£{{order_menu_item.item_price}}
                  </li>
                {% endif %}
              {% endfor %}
            {% endfor %}
          </ol>
        </td>
        <td>{{ item.status }}</td>
        <td>{{item.delivery_status}}</td>
        <td>{{ item.time_placed.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        <td class="button-cell">
          {% if item.status == 'incomplete' %}
            <p>Wait for order status to update</p>
          {% else %}
            {% if item.delivery_status == 'waiting' %}
              <form action="{{ url_for('kitchen.changeDelivery', order_id=item.id, status = 'preparing') }}" method="post">
                <button type="submit" class="btn btn-success order-button"> Preparing! </button>
              </form>
            {% elif item.delivery_status == 'preparing' %}
              <form action="{{ url_for('kitchen.changeDelivery', order_id=item.id, status = 'ready') }}" method="post">
                <button type="submit" class="btn btn-success order-button"> Ready! </button>
              </form>
            {% else %}
              <p>Order Complete!</p>
            {% endif %}
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>
</div>

<style>
  ol {
    padding: 0;
    margin: 0;
  }

ol li{
        margin-left: 0;
}
</style>
{%endblock%}


